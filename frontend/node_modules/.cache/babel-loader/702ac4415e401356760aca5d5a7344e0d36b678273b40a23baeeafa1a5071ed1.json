{"ast":null,"code":"var _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { getAuthenticatedUser, getBestRatedBooks } from './common';\n\n// eslint-disable-next-line import/prefer-default-export\nexport function useUser() {\n  _s();\n  const [connectedUser, setConnectedUser] = useState(null);\n  const [auth, setAuth] = useState(false);\n  const [userLoading, setUserLoading] = useState(true);\n  useEffect(() => {\n    async function getUserDetails() {\n      const {\n        authenticated,\n        user\n      } = await getAuthenticatedUser();\n      setConnectedUser(user);\n      setAuth(authenticated);\n      setUserLoading(false);\n    }\n    getUserDetails();\n  }, []);\n  return {\n    connectedUser,\n    auth,\n    userLoading\n  };\n}\n_s(useUser, \"USUuoq3iL4KXhbv5aB1AeqEyIFU=\");\nexport function useBestRatedBooks() {\n  _s2();\n  const [bestRatedBooks, setBestRatedBooks] = useState({});\n  useEffect(() => {\n    async function getRatedBooks() {\n      const books = await getBestRatedBooks();\n      setBestRatedBooks(books);\n    }\n    getRatedBooks();\n  }, []);\n  return {\n    bestRatedBooks\n  };\n}\n_s2(useBestRatedBooks, \"enaNHG66GCQ9n35hWjbuWwoCHGw=\");\nexport function useFilePreview(file) {\n  _s3();\n  var _file$, _fileInput$;\n  const fileInput = (_file$ = file[0]) !== null && _file$ !== void 0 ? _file$ : [];\n  const [imgSrc, setImgSrc] = useState(null);\n  useEffect(() => {\n    var _file$2;\n    if (file && ((_file$2 = file[0]) === null || _file$2 === void 0 ? void 0 : _file$2.length) > 0) {\n      const newUrl = URL.createObjectURL(file[0][0]);\n      if (newUrl !== imgSrc) {\n        setImgSrc(newUrl);\n      }\n    }\n  }, [(_fileInput$ = fileInput[0]) === null || _fileInput$ === void 0 ? void 0 : _fileInput$.name]);\n  return [imgSrc, setImgSrc];\n}\n_s3(useFilePreview, \"Rxc+5LYzXyTnmDg8veUjSLSqj8Y=\");","map":{"version":3,"names":["useState","useEffect","getAuthenticatedUser","getBestRatedBooks","useUser","connectedUser","setConnectedUser","auth","setAuth","userLoading","setUserLoading","getUserDetails","authenticated","user","useBestRatedBooks","bestRatedBooks","setBestRatedBooks","getRatedBooks","books","useFilePreview","file","fileInput","imgSrc","setImgSrc","length","newUrl","URL","createObjectURL","name"],"sources":["/home/youcef/Bureau/Code/OPENCLASSROOM/Projet OC/Project-7/frontend/src/lib/customHooks.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { getAuthenticatedUser, getBestRatedBooks } from './common';\n\n// eslint-disable-next-line import/prefer-default-export\nexport function useUser() {\n  const [connectedUser, setConnectedUser] = useState(null);\n  const [auth, setAuth] = useState(false);\n  const [userLoading, setUserLoading] = useState(true);\n\n  useEffect(() => {\n    async function getUserDetails() {\n      const { authenticated, user } = await getAuthenticatedUser();\n      setConnectedUser(user);\n      setAuth(authenticated);\n      setUserLoading(false);\n    }\n    getUserDetails();\n  }, []);\n\n  return { connectedUser, auth, userLoading };\n}\n\nexport function useBestRatedBooks() {\n  const [bestRatedBooks, setBestRatedBooks] = useState({});\n\n  useEffect(() => {\n    async function getRatedBooks() {\n      const books = await getBestRatedBooks();\n      setBestRatedBooks(books);\n    }\n    getRatedBooks();\n  }, []);\n\n  return { bestRatedBooks };\n}\n\nexport function useFilePreview(file) {\n  const fileInput = file[0] ?? [];\n  const [imgSrc, setImgSrc] = useState(null);\n\n  useEffect(() => {\n    if (file && file[0]?.length > 0) {\n      const newUrl = URL.createObjectURL(file[0][0]);\n\n      if (newUrl !== imgSrc) {\n        setImgSrc(newUrl);\n      }\n    }\n  }, [fileInput[0]?.name]);\n\n  return [imgSrc, setImgSrc];\n}\n"],"mappings":";;;AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,oBAAoB,EAAEC,iBAAiB,QAAQ,UAAU;;AAElE;AACA,OAAO,SAASC,OAAO,GAAG;EAAA;EACxB,MAAM,CAACC,aAAa,EAAEC,gBAAgB,CAAC,GAAGN,QAAQ,CAAC,IAAI,CAAC;EACxD,MAAM,CAACO,IAAI,EAAEC,OAAO,CAAC,GAAGR,QAAQ,CAAC,KAAK,CAAC;EACvC,MAAM,CAACS,WAAW,EAAEC,cAAc,CAAC,GAAGV,QAAQ,CAAC,IAAI,CAAC;EAEpDC,SAAS,CAAC,MAAM;IACd,eAAeU,cAAc,GAAG;MAC9B,MAAM;QAAEC,aAAa;QAAEC;MAAK,CAAC,GAAG,MAAMX,oBAAoB,EAAE;MAC5DI,gBAAgB,CAACO,IAAI,CAAC;MACtBL,OAAO,CAACI,aAAa,CAAC;MACtBF,cAAc,CAAC,KAAK,CAAC;IACvB;IACAC,cAAc,EAAE;EAClB,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO;IAAEN,aAAa;IAAEE,IAAI;IAAEE;EAAY,CAAC;AAC7C;AAAC,GAhBeL,OAAO;AAkBvB,OAAO,SAASU,iBAAiB,GAAG;EAAA;EAClC,MAAM,CAACC,cAAc,EAAEC,iBAAiB,CAAC,GAAGhB,QAAQ,CAAC,CAAC,CAAC,CAAC;EAExDC,SAAS,CAAC,MAAM;IACd,eAAegB,aAAa,GAAG;MAC7B,MAAMC,KAAK,GAAG,MAAMf,iBAAiB,EAAE;MACvCa,iBAAiB,CAACE,KAAK,CAAC;IAC1B;IACAD,aAAa,EAAE;EACjB,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO;IAAEF;EAAe,CAAC;AAC3B;AAAC,IAZeD,iBAAiB;AAcjC,OAAO,SAASK,cAAc,CAACC,IAAI,EAAE;EAAA;EAAA;EACnC,MAAMC,SAAS,aAAGD,IAAI,CAAC,CAAC,CAAC,2CAAI,EAAE;EAC/B,MAAM,CAACE,MAAM,EAAEC,SAAS,CAAC,GAAGvB,QAAQ,CAAC,IAAI,CAAC;EAE1CC,SAAS,CAAC,MAAM;IAAA;IACd,IAAImB,IAAI,IAAI,YAAAA,IAAI,CAAC,CAAC,CAAC,4CAAP,QAASI,MAAM,IAAG,CAAC,EAAE;MAC/B,MAAMC,MAAM,GAAGC,GAAG,CAACC,eAAe,CAACP,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MAE9C,IAAIK,MAAM,KAAKH,MAAM,EAAE;QACrBC,SAAS,CAACE,MAAM,CAAC;MACnB;IACF;EACF,CAAC,EAAE,gBAACJ,SAAS,CAAC,CAAC,CAAC,gDAAZ,YAAcO,IAAI,CAAC,CAAC;EAExB,OAAO,CAACN,MAAM,EAAEC,SAAS,CAAC;AAC5B;AAAC,IAfeJ,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}